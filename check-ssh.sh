#!/bin/bash
echo "üîç –ü–†–û–í–ï–†–ö–ê SSH –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –∫–ª—é—á
if [ ! -f ~/.ssh/id_ed25519 ]; then
    echo "‚ùå SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ –∫–ª—é—á –≤ –∞–≥–µ–Ω—Ç
if ! ssh-add -l | grep -q "id_ed25519"; then
    echo "üîë –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ –∞–≥–µ–Ω—Ç..."
    eval "$(ssh-agent -s)"
    ssh-add ~/.ssh/id_ed25519
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GitHub
echo "üåê –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GitHub..."
ssh -T git@github.com
#!/bin/bash
echo "üîç –ü–†–û–í–ï–†–ö–ê SSH –ö–õ–Æ–ß–ê"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–ª—é—á
if [ ! -f ~/.ssh/id_ed25519 ]; then
    echo "‚ùå SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ –≤ –∞–≥–µ–Ω—Ç
if ! ssh-add -l | grep -q "id_ed25519"; then
    echo "üîë –î–æ–±–∞–≤–ª—è–µ–º –∫–ª—é—á –≤ –∞–≥–µ–Ω—Ç..."
    eval "$(ssh-agent -s)"
    ssh-add ~/.ssh/id_ed25519
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
echo "üåê –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GitHub..."
ssh -T git@github.com

if [ $? -eq 0 ]; then
    echo "‚úÖ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!"
else
    echo "‚ùå SSH –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
    echo "üìã –£–±–µ–¥–∏—Å—å —á—Ç–æ –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub:"
    cat ~/.ssh/id_ed25519.pub
    echo ""
    echo "üåê https://github.com/settings/keys"
fi
