#!/bin/bash
echo "üîó –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –°–£–©–ï–°–¢–í–£–Æ–©–ï–ú–£ –†–ï–ü–û–ó–ò–¢–û–†–ò–Æ"

REPO_NAME="auto-cloud-api"
REPO_URL="https://github.com/Ru6404/$REPO_NAME"

echo "üìã –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: $REPO_NAME"
echo "üåê URL: $REPO_URL"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è..."
if curl -s https://api.github.com/repos/Ru6404/$REPO_NAME | grep -q "Not Found"; then
    echo "‚ùå –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
    exit 1
else
    echo "‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
fi

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π remote
echo "üåê –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º remote URL..."
git remote remove origin 2>/dev/null
git remote add origin git@github.com:Ru6404/$REPO_NAME.git

echo "‚úÖ Remote –Ω–∞—Å—Ç—Ä–æ–µ–Ω: $(git remote get-url origin)"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
echo "üîó –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ..."
if git ls-remote origin >/dev/null 2>&1; then
    echo "‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!"
    
    # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å —É–¥–∞–ª–µ–Ω–Ω—ã–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º
    echo "üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å GitHub..."
    git fetch origin
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Ä–∞–∑–ª–∏—á–∏—è
    if git diff --quiet main origin/main 2>/dev/null; then
        echo "‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –∏ —É–¥–∞–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã"
    else
        echo "‚ö†Ô∏è  –ï—Å—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ —É–¥–∞–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π"
        echo "üì¶ –ü—É—à–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
        git push -u origin main
    fi
    
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
    echo "üìã –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:"
    echo "1. –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é"
    echo "2. SSH –∫–ª—é—á –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub"
    echo "3. SSH –∫–ª—é—á –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∞–≥–µ–Ω—Ç"
    echo ""
    echo "üîç –ü—Ä–æ–≤–µ—Ä—å: ssh -T git@github.com"
fi
